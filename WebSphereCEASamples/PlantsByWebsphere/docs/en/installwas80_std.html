<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML>
<HEAD>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta name="copyright" content="IBM Corporation 2006, 2011">
<meta name="DC.Rights.Owner" content="IBM Corporation 2006, 2011">
<!-- All rights reserved. Licensed Materials Property of IBM -->
<!-- US Government Users Restricted Rights -->
<!-- Use, duplication or disclosure restricted by -->
<!-- GSA ADP Schedule Contract with IBM Corp. -->
<link rel=stylesheet href="book.css" type="text/css">
</HEAD>
<BODY>
<!-- Header information -->
<iframe src="header.html" scrolling="no" frameborder="0" style="width: 100%; height:75px;">
<a href="header.html">Hmm, you are using a very old browser. Click here to go directly to included content.</a>
</iframe>

<h1 class="topictitle1">PlantsByWebSphere Ajax Edition for CEA on WebSphere Application Server 8.0</h1>
<H3>Configuring the Database Resources Required by PlantsByWebSphere Ajax Edition for CEA</H3>
<P>The PlantsByWebSphere Ajax Edition for CEA application uses the <A HREF="http://db.apache.org/derby/" target="_blank">Derby</A> database included with WebSphere&reg; Application Server. The PlantsByWebSphere.ear file contains a set of embedded Derby database tables that are used by the application. Configuring the database connection involves defining a Derby Java Database Connectivity (JDBC) XA-provider (unless one already exists), and defining a data source for PlantsByWebSphere Ajax Edition for CEA.</P>

<H4>Define a Derby JDBC XA Provider</H4>
<P>Follow the procedures outlined below to define a Derby JDBC XA provider. A JDBC provider supplies the specific JDBC driver implementation class for access to a specific vendor database.</P>
<OL>
<LI>Start WebSphere Application Server if it is not running.</LI>
<LI>Launch the administrative console.</LI>
<LI>Select <B>Resources > JDBC > JDBC Providers</B> in the left-hand navigation tree of the administrative console.</LI>
<LI>Set the scope to Node=&lt;<I>Node Name</I>&gt;,server=&lt;<I>Server Name</I>&gt;.</LI>
<LI>Click <B>New</B>.</LI>
<LI>Specify the following properties:</LI>
<UL>
<LI>Database type: <B>Derby</B></LI>
<LI>Provider type: <B>Derby JDBC Provider</B></LI>
<LI>Implementation type: <B>XA Data source</B></LI>
<LI>Name: <I>Derby Provider for PlantsByWebSphereAjax (XA)</I></LI>
</UL>
<LI>Click <B>Next</B>.</LI>
<LI>On the summary page, click <B>Finish</B> to save the changes to the local configuration.</LI>
<LI>Click <B>Save</B> to save the changes directly to the master configuration.</LI>
</OL>

<H4>Define a Data Source</H4>
<P>Follow the procedures outlined below to define a data source and associate it with the Derby JDBC XA provider.</P>
<OL>
<LI>Start WebSphere Application Server if it is not running.</LI>
<LI>Launch the administrative console.</LI>
<LI>Click <B>Resources > JDBC > Data sources</B> in the left-hand navigation tree of the administrative console.</LI>
<LI>Set the scope to Node=&lt;<I>Node Name</I>&gt;,server=&lt;<I>Server Name</I>&gt;.</LI>
<LI>Click <B>New</B>.</LI>
<LI>Specify the following properties:
<UL>
<LI>Data source: <I>PLANTSDB</I></LI>
<LI>JNDI name: <I>jdbc/PlantsByWebSphereAjaxDataSource</I></LI>
</UL>
<LI>Click <B>Next</B>.</LI>
<LI>Choose <B>Select an existing JDBC Provider</B>.</LI>
<LI>Choose <B>Derby Provider for PlantsByWebSphereAjax (XA)</B> (defined earlier).</LI>
<LI>Click <B>Next</B>.</LI>
<LI>For the Database name, enter (exactly) <I>${APP_INSTALL_ROOT}/${CELL}/PlantsByWebSphereAjax.ear/Database/PLANTSDB</I>
<BR>
The string <I>${APP_INSTALL_ROOT}/${CELL}</I> is a WebSphere environment variable and must be entered exactly as written above. (Do not substitute the actual install root and cell name.)</LI>
<LI>Choose <B>Use this data source in container managed persistence (CMP)</B>.</LI>
<LI>On the remaining settings pages, accept the default values and click <B>Next</B>.</LI>
<LI>On the summary page, click <B>Finish</B> to save the changes to the local configuration.</LI>
<LI>Click <B>Save</B> to save the changes to the master configuration.</LI>
</OL>

<br>
<H3>Installing PlantsByWebSphere Ajax Edition for CEA</H3>
<H4>Before You Begin</H4>
<P>The PlantsByWebSphere Ajax Edition for CEA application is an undeployed Java Enterprise Archive file (EAR); therefore, the deployment bindings between the Enterprise Java Beans (EJB) and the application server have not been generated. You can generate the bindings with the deployment tool that is provided with WebSphere Application Server. The deployment tool generates an EAR file that contains generated binding code. The newly generated EAR file can then be installed to WebSphere Application Server.</P>
<P>First open a command window for your platform and change to the installableApps directory of the CEA samples package. Then submit the following command:</P>
<table width="100%" cellpadding="0" cellspacing="0" border="0">
<tr><td class="code-outline">
<pre class="displaycode">
<B>Linux, UNIX, and z/OS
&lt;app_server_root&gt;/bin/ejbdeploy.sh PlantsByWebSphere.ear &lt;<I>working directory</I>&gt; PlantsByWebSphere_Deployed.ear -dbvendor DERBY_V10</B>
<BR>
<B>Windows
&lt;app_server_root&gt;\bin\ejbdeploy.bat PlantsByWebSphere.ear &lt;<I>working directory</I>&gt; PlantsByWebSphere_Deployed.ear -dbvendor DERBY_V10</B>
<BR>
The &lt;<I>working directory</I>&gt; is a temporary location that the ejbdeploy tool can use for storage. For example,
on Windows, a temporary location could be the c:/temp directory.</P>
</td></tr>
</table>

<H4>Procedure</H4>
<OL>
<LI>Start WebSphere Application Server if it is not running.</LI>
<LI>Launch the administrative console.</LI>
<LI>Click <B>Applications > New Application</B> in the left-hand navigation tree of the administrative console.</LI>
<LI>Click <b>New Enterprise Application</b>.</LI>
<LI>Specify the path to the PlantsByWebSphere_Deployed.ear file created above.</LI>
<LI>Click <b>Next</b></LI>
<LI>Select the <B>Fast Path</B> option.</LI>
<LI>Click <B>Next</B>.</LI>
<LI>On the remaining settings pages, accept the default values and click <B>Next</B>.</LI>
<LI>On the summary page, click <B>Finish</B> to save the changes to the local configuration.</LI>
<LI>After the application is installed, click <B>Save</B> to save the changes to the master configuration.</LI>
<LI>To start the application, click <B>Applications > Application Types > WebSphere enterprise applications</B> in the left-hand navigation tree of the administrative console. Then select the <B>PlantsByWebSphereAjax</B> application and click <B>Start</B>.</LI>
</OL>

<br>
<H3>Accessing PlantsByWebSphere AJAX Edition for CEA</H3>
<P>The URL for the application is <B><font color="#6633CC">http://host:port/PlantsByWebSphereAjax</FONT></B>, for example, <B><font color="#6633CC">http://localhost:9080/PlantsByWebSphereAjax</FONT></B>.</P>
<P>The example assumes that the application server is running locally, and that the internal HTTP server is using port 9080. The port can be different depending on how you installed the application server. To determine the HTTP port, first click <B>Servers > Server Types > WebSphere application servers</B> in the left-hand navigation tree of the administrative console. Next, click the appropriate entry in the list of application servers. Finally, click <B>Ports</B> (located within the Communications category of settings) to see a list of currently configured ports for the application server. The HTTP port is the <I>WC_defaulthost</I> entry.</P>

<br>
<p>For more information, see the appropriate <a href="http://www.ibm.com/software/webservers/appserv/was/library/">WebSphere Application Server Information Center</a>.</p>

<br>
<iframe src="footer.html" scrolling="no" frameborder="0" style="width: 100%;">
<a href="footer.html">Hmm, you are using a very old browser. Click here to go directly to included content.</a>
</iframe>

</BODY>
</HTML>

